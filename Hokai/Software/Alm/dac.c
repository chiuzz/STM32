#include"c8051f330.h"

//------------------------------------------------------------------------------------
// 端口初始化
//------------------------------------------------------------------------------------

void DAC_PORT_Init (void)
{
   P0SKIP  |= 0x41;    //对应的P0.0/P0.6被交叉开关跳过    
   P0MDIN  &= ~0x01;   //P0.0应被配置为模拟输入并被数字交叉开关跳过       
   XBR1     = 0x40;    //交叉开关使能             
}

//-----------------------------------------------------------------------------
// 数模转换初始化
//-----------------------------------------------------------------------------
void DAC0_Init (void)
{
   DAC_PORT_Init();     //IDAC的IO口初始化
   IDA0CN = 0xb2;       //设置为0x82,0x92,0xa2,0xb2时分别是用定时器0，1，2，3的溢出作为IDAC的更新输出           
   REF0CN = 0x03;       //参考电压选择           
}

//-----------------------------------------------------------------------------
// 外部触发转换程序
//-----------------------------------------------------------------------------
/*
void DAC0_CNVS_DAC0h(void)
{
    IDA0H=i;
   i=i+16;
   if(i==0xffff)
   {
   i=0;}
} */
